:root {
    --bg: #0f1014;
    --surface: #1e2025;
    --surface-light: #2c2e36;
    --primary: #fbbf24;
    --primary-dark: #d97706;
    --success: #10b981;
    --danger: #ef4444;
    --text: #ffffff;
    --text-muted: #9ca3af;
    --border: rgba(255,255,255,0.08);
    --font: 'Plus Jakarta Sans', sans-serif;
    --radius: 24px;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font); -webkit-tap-highlight-color: transparent; }

body { 
    background: var(--bg); color: var(--text); 
    min-height: 100vh; overflow-x: hidden; overflow-y: auto; display: block;
}

.top-bar { position: fixed; top: 0; left: 0; right: 0; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(15, 16, 20, 0.95); backdrop-filter: blur(10px); z-index: 100; border-bottom: 1px solid var(--border); height: 70px; }
.main-view { padding: 20px; margin-top: 70px; padding-bottom: 140px; }
.view-section { animation: fadeIn 0.3s ease; display: flex; flex-direction: column; gap: 20px; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.hidden { display: none !important; }

/* AUTH */
#auth-screen { position: fixed; top:0; left:0; width:100%; height:100%; z-index: 9999; display: flex; align-items: center; justify-content: center; background: url('https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=2832&auto=format&fit=crop') no-repeat center center/cover; }
#auth-screen::before { content:''; position: absolute; inset:0; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
.auth-glass { position: relative; z-index: 2; width: 100%; max-width: 350px; padding: 40px; text-align: center; }
.brand { margin-bottom: 30px; }
.brand-icon { font-size: 40px; color: var(--primary); margin-bottom: 10px; filter: drop-shadow(0 0 10px rgba(251,191,36,0.5)); }
.brand h2 { font-size: 28px; font-weight: 800; letter-spacing: -1px; margin-bottom: 5px; }
.brand p { color: var(--text-muted); font-size: 13px; text-transform: uppercase; letter-spacing: 2px; }
.pin-dots { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; height: 16px; }
.pin-dots span { width: 14px; height: 14px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.2); transition: 0.3s; }
.pin-dots span.filled { background: var(--primary); border-color: var(--primary); box-shadow: 0 0 10px var(--primary); }
.pin-dots span.error { border-color: var(--danger); background: var(--danger); animation: shake 0.3s; }
#auth-msg { color: var(--text-muted); font-size: 13px; margin-bottom: 25px; }
.numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.numpad button { width: 70px; height: 70px; margin: 0 auto; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: #fff; font-size: 24px; font-weight: 600; cursor: pointer; transition: 0.2s; backdrop-filter: blur(5px); }
.numpad button:active { background: var(--primary); color: #000; transform: scale(0.9); }
.numpad .icon-btn { background: transparent; border: none; font-size: 20px; color: var(--text-muted); }
.numpad .del { color: var(--danger); }

/* HEADER ELEMENTS */
.user-info { display: flex; align-items: center; gap: 12px; }
.avatar { width: 42px; height: 42px; background: var(--surface-light); border-radius: 14px; display: flex; align-items: center; justify-content: center; color: var(--primary); border: 1px solid var(--border); }
.greetings small { color: var(--text-muted); font-size: 11px; text-transform: uppercase; }
.greetings h4 { font-size: 16px; font-weight: 700; }
.search-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--surface); border: 1px solid var(--border); color: #fff; cursor: pointer; }
#search-layer { position: fixed; top: 0; left: 0; width: 100%; height: 70px; background: var(--bg); z-index: 110; display: flex; align-items: center; padding: 0 20px; gap: 15px; border-bottom: 1px solid var(--primary); animation: slideDown 0.3s; }
#search-layer input { flex: 1; background: transparent; border: none; font-size: 18px; color: #fff; outline: none; }
#search-layer button { background: none; border: none; color: var(--text-muted); font-size: 20px; }

/* CARD & WIDGETS */
.master-card { position: relative; background: linear-gradient(135deg, #1e1e1e, #000); border-radius: 28px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; box-shadow: 0 15px 30px rgba(0,0,0,0.3); }
.card-bg { position: absolute; top: -50%; right: -20%; width: 200px; height: 200px; background: var(--primary); filter: blur(90px); opacity: 0.1; pointer-events: none; }
.card-content { position: relative; z-index: 2; margin-bottom: 25px; }
.card-content .lbl { color: var(--text-muted); font-size: 13px; font-weight: 500; }
.card-content h1 { font-size: 38px; font-weight: 800; margin: 5px 0; letter-spacing: -1px; }
.currency-toggle { display: inline-block; background: rgba(255,255,255,0.05); padding: 5px 12px; border-radius: 20px; font-size: 11px; color: var(--primary); cursor: pointer; border: 1px solid rgba(251, 191, 36, 0.2); }
.card-actions { display: flex; gap: 10px; position: relative; z-index: 2; }
.card-actions button { flex: 1; padding: 14px; border-radius: 16px; border: none; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 14px; transition: 0.2s; }
.card-actions button:first-child { background: var(--primary); color: #000; }
.card-actions button:last-child { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.1); }
.card-actions button:active { transform: scale(0.96); }

.profit-checker-box { background: var(--surface); padding: 20px; border-radius: 24px; border: 1px solid var(--border); }
.pc-header { display: flex; align-items: center; gap: 10px; color: var(--primary); font-size: 14px; font-weight: 600; margin-bottom: 15px; }
.pc-controls input { width: 100%; background: var(--bg); border: 1px solid var(--border); padding: 12px; border-radius: 12px; color: #fff; font-size: 14px; font-family: var(--font); outline: none; margin-bottom: 15px; }
.pc-result { display: flex; align-items: center; justify-content: space-between; background: var(--bg); padding: 15px; border-radius: 16px; }
.pc-item h3 { font-size: 20px; color: var(--text); }
.pc-item small { font-size: 11px; color: var(--text-muted); }
.pc-divider { width: 1px; height: 30px; background: var(--border); }
.pc-item.sub { display: flex; flex-direction: column; text-align: right; font-size: 12px; }
.pc-item .inc { color: var(--success); } .pc-item .exp { color: var(--danger); }

.stats-row { display: flex; gap: 12px; }
.stat-pill { flex: 1; background: var(--surface); padding: 15px; border-radius: 20px; display: flex; align-items: center; gap: 12px; border: 1px solid var(--border); }
.stat-pill .icon { width: 36px; height: 36px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.inc .icon { background: rgba(16, 185, 129, 0.15); color: var(--success); } .exp .icon { background: rgba(239, 68, 68, 0.15); color: var(--danger); }
.stat-pill small { display: block; font-size: 11px; color: var(--text-muted); } .stat-pill b { font-size: 15px; font-weight: 700; }

.list-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; margin-top: 10px; }
.list-head h3 { font-size: 16px; font-weight: 700; }
.list-head span { color: var(--primary); font-size: 13px; font-weight: 600; cursor: pointer; }
.trans-list { display: flex; flex-direction: column; gap: 10px; }
.tx-item { background: var(--surface); padding: 16px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; border: 1px solid transparent; transition: 0.2s; animation: slideUp 0.3s; }
.tx-left { display: flex; gap: 14px; align-items: center; }
.cat-icon { width: 44px; height: 44px; background: var(--bg); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: var(--text-muted); border: 1px solid var(--border); }
.cat-icon.inc { color: var(--success); } .cat-icon.exp { color: var(--danger); }
.tx-info h4 { font-size: 15px; font-weight: 600; margin-bottom: 2px; }
.tx-info p { font-size: 12px; color: var(--text-muted); }
.tx-amt { font-size: 15px; font-weight: 700; display: block; text-align: right; }
.tx-amt.inc { color: var(--success); } .tx-amt.exp { color: var(--text); }

/* CALENDAR & REPORT */
.cal-container { background: var(--surface); border-radius: 28px; padding: 20px; border: 1px solid var(--border); }
.cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.cal-header h3 { font-size: 16px; font-weight: 700; }
.cal-header button { background: var(--bg); border: 1px solid var(--border); color: #fff; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; }
.cal-weekdays { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; margin-bottom: 10px; }
.cal-weekdays div { font-size: 12px; color: var(--text-muted); font-weight: 600; }
.cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
.cal-day { aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 12px; font-size: 13px; cursor: pointer; position: relative; background: var(--surface-light); border: 1px solid transparent; }
.cal-day.empty { background: transparent; cursor: default; }
.cal-day.today { border-color: var(--primary); color: var(--primary); }
.cal-day.active { background: var(--primary); color: #000; font-weight: 700; }
.cal-day .dot { width: 4px; height: 4px; background: var(--success); border-radius: 50%; position: absolute; bottom: 6px; }
.cal-day.active .dot { background: #000; }

.report-card { background: rgba(30, 32, 37, 0.8); backdrop-filter: blur(12px); border-radius: 24px; padding: 20px; border: 1px solid rgba(251, 191, 36, 0.3); box-shadow: 0 0 20px rgba(251, 191, 36, 0.1); margin-top: 10px; animation: slideUp 0.3s; }
.rc-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 15px; margin-bottom: 15px; }
.rc-date { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 15px; color: #fff; }
.rc-date i { color: var(--primary); }
.rc-badge { background: rgba(251, 191, 36, 0.15); color: var(--primary); padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.rc-main-profit { text-align: center; margin-bottom: 25px; }
.rc-main-profit small { color: var(--text-muted); font-size: 12px; letter-spacing: 1px; text-transform: uppercase; }
.rc-main-profit h2 { font-size: 32px; font-weight: 800; color: #fff; margin-top: 5px; text-shadow: 0 0 15px rgba(255,255,255,0.1); }
.rc-stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.rc-stat { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 16px; display: flex; align-items: center; gap: 10px; border: 1px solid var(--border); }
.rc-icon { width: 34px; height: 34px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.s-inc .rc-icon { background: rgba(16, 185, 129, 0.15); color: var(--success); } .s-exp .rc-icon { background: rgba(239, 68, 68, 0.15); color: var(--danger); }
.rc-stat small { display: block; font-size: 10px; color: var(--text-muted); } .rc-stat b { font-size: 14px; font-weight: 700; } .s-inc b { color: var(--success); } .s-exp b { color: var(--danger); }

/* FILTERS */
.filter-sticky { position: sticky; top: 0; background: var(--bg); padding: 10px 0; z-index: 10; display: flex; flex-direction: column; gap: 10px; }
.filter-row { display: flex; gap: 10px; width: 100%; }
.f-btn { background: var(--surface); border: 1px solid var(--border); color: var(--text-muted); padding: 8px 18px; border-radius: 20px; font-size: 13px; cursor: pointer; flex: 1; }
.f-btn.active { background: #fff; color: #000; font-weight: 700; }
.time-filter select, .time-filter input { flex: 1; background: var(--surface); border: 1px solid var(--border); padding: 8px 12px; border-radius: 14px; color: #fff; font-size: 13px; width: 100%; outline: none; }
#time-input-container { flex: 1; display: flex; }

/* SHEET & DOCK */
.overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 2000; display: flex; justify-content: center; align-items: flex-end; }
.center-overlay { align-items: center; } /* KEY FIX FOR CENTER POPUP */
.bottom-sheet { background: var(--surface); width: 100%; max-width: 600px; border-radius: 32px 32px 0 0; padding: 25px; padding-bottom: 40px; border-top: 1px solid var(--border); animation: slideUp 0.3s; box-shadow: 0 -10px 40px rgba(0,0,0,0.5); max-height: 85vh; overflow-y: auto; }
.sheet-handle { width: 50px; height: 5px; background: #444; border-radius: 10px; margin: 0 auto 20px; }
.sheet-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
.close-btn { background: var(--bg); width: 32px; height: 32px; border-radius: 50%; border: none; color: #fff; }
.type-pill-group { background: var(--bg); padding: 5px; border-radius: 16px; display: flex; margin-bottom: 25px; }
.pill { flex: 1; padding: 12px; text-align: center; border-radius: 12px; font-size: 14px; font-weight: 600; color: var(--text-muted); cursor: pointer; transition: 0.3s; }
.pill.active { background: var(--primary); color: #000; }
.big-input { background: var(--bg); border: 1px solid var(--border); border-radius: 20px; padding: 15px; display: flex; align-items: center; margin-bottom: 20px; gap: 10px; }
.big-input select { background: none; border: none; font-size: 22px; color: var(--primary); font-weight: 700; width: 70px; outline: none; }
.big-input input { background: none; border: none; font-size: 36px; color: #fff; width: 100%; font-weight: 700; outline: none; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
.input-box { display: flex; flex-direction: column; gap: 8px; }
.input-box.full { grid-column: span 2; }
.input-box label { font-size: 12px; color: var(--text-muted); margin-left: 5px; }
.input-box input, .input-box select { background: var(--bg); border: 1px solid var(--border); padding: 14px; border-radius: 14px; color: #fff; font-size: 14px; outline: none; width: 100%; appearance: none; }
.sheet-footer { display: flex; gap: 15px; margin-top: 15px; }
.save-btn { flex: 1; background: var(--primary); color: #000; font-weight: 700; padding: 16px; border-radius: 18px; border: none; font-size: 16px; cursor: pointer; }
.del-btn { width: 56px; background: rgba(239, 68, 68, 0.1); color: var(--danger); border: none; border-radius: 18px; font-size: 18px; cursor: pointer; }
.dock-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 350px; background: rgba(20,20,25,0.9); backdrop-filter: blur(15px); border: 1px solid var(--border); height: 70px; border-radius: 24px; display: flex; justify-content: space-around; align-items: center; z-index: 1000; box-shadow: 0 10px 40px rgba(0,0,0,0.4); }
.dock-btn { background: none; border: none; color: #555; font-size: 20px; padding: 10px; border-radius: 12px; transition: 0.3s; }
.dock-btn.active { color: var(--primary); }
.center-fab { background: var(--primary); color: #000; width: 50px; height: 50px; border-radius: 18px; font-size: 22px; box-shadow: 0 5px 20px rgba(251, 191, 36, 0.3); transform: translateY(-20px); }

/* SETTINGS & RECURRING */
.settings-wrap { padding-top: 10px; }
.set-card { background: var(--surface); border-radius: 24px; padding: 10px; margin-bottom: 20px; border: 1px solid var(--border); }
.set-item, .set-btn { display: flex; align-items: center; padding: 16px; border-bottom: 1px solid #2a2a2a; width: 100%; color: #fff; }
.set-item:last-child, .set-btn:last-child { border: none; }
.set-item .icon, .set-btn i { width: 36px; height: 36px; background: var(--bg); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 15px; color: var(--primary); font-size: 14px; }
.set-item .txt { flex: 1; }
.set-item b { font-size: 14px; display: block; }
.set-item small { color: var(--text-muted); font-size: 11px; }
.set-btn { background: none; border: none; cursor: pointer; font-size: 14px; font-weight: 500; text-align: left; }
.set-btn.danger i { color: var(--danger); } .set-btn.danger { color: var(--danger); }
.set-btn.highlight i { color: #fff; background: var(--primary); }
#set-rate { width: 70px; padding: 8px; background: var(--bg); border: 1px solid #333; color: #fff; border-radius: 8px; text-align: center; }
.recurring-box { margin-bottom: 20px; padding: 0 5px; }
.checkbox-container { display: block; position: relative; padding-left: 30px; cursor: pointer; font-size: 14px; user-select: none; color: #fff; }
.checkbox-container input { position: absolute; opacity: 0; cursor: pointer; height: 0; width: 0; }
.checkmark { position: absolute; top: 0; left: 0; height: 20px; width: 20px; background-color: var(--bg); border: 1px solid var(--border); border-radius: 6px; }
.checkbox-container:hover input ~ .checkmark { background-color: #333; }
.checkbox-container input:checked ~ .checkmark { background-color: var(--primary); border-color: var(--primary); }
.checkmark:after { content: ""; position: absolute; display: none; }
.checkbox-container input:checked ~ .checkmark:after { display: block; }
.checkbox-container .checkmark:after { left: 7px; top: 3px; width: 5px; height: 10px; border: solid black; border-width: 0 2px 2px 0; transform: rotate(45deg); }
.checkbox-container small { display: block; color: var(--text-muted); font-size: 11px; margin-top: 2px; }

/* DIALOGS */
.dialog-box { background: var(--surface); padding: 30px; border-radius: 28px; width: 85%; max-width: 300px; text-align: center; border: 1px solid var(--border); }
.dialog-box input { background: var(--bg); border: 1px solid var(--border); padding: 15px; width: 100%; text-align: center; font-size: 24px; letter-spacing: 5px; color: #fff; border-radius: 12px; margin: 20px 0; outline: none; }
.dialog-btns { display: flex; gap: 10px; }
.dialog-btns button { flex: 1; padding: 12px; border-radius: 12px; border: none; background: var(--bg); color: #fff; cursor: pointer; }
.dialog-btns button.primary { background: var(--primary); color: #000; font-weight: 700; }
.danger-mode { border-color: var(--danger); }
.warn-icon { font-size: 40px; color: var(--danger); margin-bottom: 10px; }
.danger-btn { background: var(--danger) !important; color: #fff; font-weight: 700; }
#toast-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 9999; width: 90%; text-align: center; pointer-events: none; }
.toast { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: #fff; padding: 12px 24px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); display: inline-block; font-size: 13px; font-weight: 500; margin-top: 10px; animation: slideDown 0.3s; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
@keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }